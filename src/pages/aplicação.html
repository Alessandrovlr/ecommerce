<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VingadoresXdc - Sua Loja de Sonhos</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados para o tema escuro e outros detalhes */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #c9d1d9;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 2rem;
        }
        .card {
            background-color: #161b22;
            border: 1px solid #30363d;
        }
        .product-image {
            background-size: cover;
            background-position: center;
            height: 200px;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
    </style>
</head>
<body>

    <!-- Estrutura da Aplicação -->
    <div id="app">
        <!-- HEADER -->
        <header class="bg-gray-800 text-gray-400 py-4 shadow-md">
            <div class="container flex justify-between items-center">
                <h1 class="text-2xl font-bold text-white">VingadoresXdc</h1>
                <nav class="flex items-center space-x-6">
                    <button class="text-white hover:text-blue-400 transition" onclick="showPage('home')">Home</button>
                    <button class="text-white hover:text-blue-400 transition" onclick="showPage('cart')">Carrinho</button>
                    <button id="auth-btn" class="text-white hover:text-blue-400 transition" onclick="showPage('login')">Login</button>
                    <button class="text-white hover:text-blue-400 transition" onclick="showPage('admin-login')">Admin</button>
                </nav>
            </div>
        </header>

        <!-- PÁGINAS -->
        <main>
            <!-- Página Home -->
            <section id="home-page" class="page container">
                <h2 class="text-4xl font-bold text-gray-50 text-center mb-10 mt-10">Nossos Produtos</h2>
                <div id="products-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                    <!-- Cards de produtos serão inseridos aqui pelo JavaScript -->
                </div>
            </section>

            <!-- Página Login -->
            <section id="login-page" class="page hidden flex items-center justify-center min-h-[60vh]">
                <div class="bg-gray-800 p-10 rounded-xl shadow-lg w-full max-w-md">
                    <h2 class="text-3xl font-extrabold text-center mb-8 text-gray-100">Acessar Conta</h2>
                    <form id="login-form" class="space-y-6">
                        <div>
                            <label for="login-email" class="block text-sm font-medium text-gray-300 mb-2">E-mail</label>
                            <input type="email" id="login-email" name="email" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="login-senha" class="block text-sm font-medium text-gray-300 mb-2">Senha</label>
                            <input type="password" id="login-senha" name="senha" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <button type="submit" class="w-full px-4 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700">Entrar</button>
                        <p class="text-center text-sm">Não tem conta? <a href="#" onclick="showPage('register')" class="text-blue-400 hover:underline">Cadastre-se</a></p>
                    </form>
                </div>
            </section>

            <!-- Página de Cadastro de Cliente -->
            <section id="register-page" class="page hidden flex items-center justify-center my-10">
                <div class="bg-gray-800 p-10 rounded-xl shadow-lg w-full max-w-2xl">
                    <h2 class="text-3xl font-extrabold text-center mb-8 text-gray-100">Criar Conta</h2>
                    <form id="register-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="reg-nome" class="block text-sm font-medium text-gray-300 mb-2">Nome</label>
                            <input type="text" id="reg-nome" name="nome" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="reg-sobrenome" class="block text-sm font-medium text-gray-300 mb-2">Sobrenome</label>
                            <input type="text" id="reg-sobrenome" name="sobrenome" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="reg-cpf" class="block text-sm font-medium text-gray-300 mb-2">CPF</label>
                            <input type="text" id="reg-cpf" name="cpf" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="reg-telefone" class="block text-sm font-medium text-gray-300 mb-2">Telefone</label>
                            <input type="tel" id="reg-telefone" name="telefone" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div class="col-span-1 md:col-span-2">
                            <label for="reg-endereco" class="block text-sm font-medium text-gray-300 mb-2">Endereço</label>
                            <input type="text" id="reg-endereco" name="endereco" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div class="col-span-1 md:col-span-2">
                            <label for="reg-email" class="block text-sm font-medium text-gray-300 mb-2">E-mail</label>
                            <input type="email" id="reg-email" name="email" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="reg-senha" class="block text-sm font-medium text-gray-300 mb-2">Senha</label>
                            <input type="password" id="reg-senha" name="senha" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="reg-forma-pagamento" class="block text-sm font-medium text-gray-300 mb-2">Forma de Pagamento</label>
                            <select id="reg-forma-pagamento" name="formaPagamento" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                                <option value="credito">Crédito</option>
                                <option value="debito">Débito</option>
                                <option value="pix">Pix</option>
                                <option value="boleto">Boleto</option>
                            </select>
                        </div>
                        <div class="col-span-1 md:col-span-2">
                            <button type="submit" class="w-full px-4 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700">Cadastrar</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Página do Carrinho -->
            <section id="cart-page" class="page hidden container min-h-[60vh] mt-10">
                <h2 class="text-4xl font-bold text-gray-50 text-center mb-10">Seu Carrinho</h2>
                <div id="cart-items-container">
                    <!-- Itens do carrinho serão injetados aqui -->
                </div>
                <div id="cart-empty-message" class="text-center text-lg text-gray-400 hidden">Seu carrinho está vazio.</div>
                <div id="cart-summary" class="hidden bg-gray-800 p-6 rounded-xl mt-8">
                    <div class="flex justify-between items-center text-xl font-bold mb-4">
                        <span>Total Geral:</span>
                        <span id="cart-total">R$ 0,00</span>
                    </div>
                    <button class="w-full px-4 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700" onclick="checkout()">Finalizar Compra</button>
                </div>
            </section>
            
            <!-- Página de Admin Login -->
            <section id="admin-login-page" class="page hidden flex items-center justify-center min-h-[60vh]">
                <div class="bg-gray-800 p-10 rounded-xl shadow-lg w-full max-w-md">
                    <h2 class="text-3xl font-extrabold text-center mb-8 text-gray-100">Login Admin</h2>
                    <form id="admin-login-form" class="space-y-6">
                        <div>
                            <label for="admin-user" class="block text-sm font-medium text-gray-300 mb-2">Usuário</label>
                            <input type="text" id="admin-user" name="user" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label for="admin-pass" class="block text-sm font-medium text-gray-300 mb-2">Senha</label>
                            <input type="password" id="admin-pass" name="pass" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <button type="submit" class="w-full px-4 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700">Acessar Admin</button>
                    </form>
                </div>
            </section>

            <!-- Página de Administração -->
            <section id="admin-page" class="page hidden container min-h-[60vh] mt-10">
                <h2 class="text-4xl font-bold text-gray-50 text-center mb-10">Painel de Administração</h2>
                
                <div class="bg-gray-800 p-8 rounded-xl shadow-lg mb-8">
                    <h3 class="text-2xl font-bold mb-4">Adicionar Novo Produto</h3>
                    <form id="add-product-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Nome</label>
                            <input type="text" id="prod-nome" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Preço</label>
                            <input type="number" step="0.01" id="prod-preco" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Código</label>
                            <input type="text" id="prod-cod" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Link</label>
                            <input type="text" id="prod-link" class="w-full px-4 py-3 bg-gray-700 rounded-lg">
                        </div>
                        <div class="col-span-1 md:col-span-2">
                            <label class="block text-sm font-medium mb-2">Descrição</label>
                            <textarea id="prod-desc" rows="3" class="w-full px-4 py-3 bg-gray-700 rounded-lg" required></textarea>
                        </div>
                        <div class="col-span-1 md:col-span-2">
                            <label class="block text-sm font-medium mb-2">Imagem</label>
                            <input type="file" id="prod-img" accept="image/*" class="w-full text-sm">
                        </div>
                        <div class="col-span-1 md:col-span-2">
                            <button type="submit" class="w-full px-4 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700">Adicionar Produto</button>
                        </div>
                    </form>
                </div>
                
                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-4">Produtos Existentes</h3>
                    <div id="admin-products-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Lista de produtos com opção de exclusão será injetada aqui -->
                    </div>
                </div>
            </section>
        </main>

        <!-- FOOTER -->
        <footer class="bg-gray-800 text-gray-400 py-8 mt-10">
            <div class="container flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h3 class="text-xl font-bold text-white mb-2">VingadoresXdc</h3>
                    <p>Sua loja dos Sonhos</p>
                </div>
                <div class="flex space-x-6">
                    <!-- Ícones sociais, como no seu código original, mas com placeholders -->
                    <a href="#" class="hover:text-white transition">Facebook</a>
                    <a href="#" class="hover:text-white transition">Twitter</a>
                    <a href="#" class="hover:text-white transition">Instagram</a>
                    <a href="#" class="hover:text-white transition">GitHub</a>
                </div>
            </div>
        </footer>

        <!-- MODAL DE MENSAGEM -->
        <div id="message-modal-overlay" class="modal-overlay hidden">
            <div class="bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-sm text-center">
                <p id="message-modal-text" class="text-xl text-white mb-6"></p>
                <button onclick="hideModal('message')" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">OK</button>
            </div>
        </div>

        <!-- MODAL DE CONFIRMAÇÃO DE COMPRA -->
        <div id="confirm-modal-overlay" class="modal-overlay hidden">
            <div class="bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-md">
                <h3 class="text-2xl font-bold text-white mb-4 text-center">Confirmar Compra</h3>
                <div id="confirm-modal-cart-details" class="text-gray-300 mb-6 space-y-2">
                    <!-- Detalhes da compra aqui -->
                </div>
                <div class="flex justify-between space-x-4">
                    <button onclick="hideModal('confirm')" class="w-full px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Cancelar</button>
                    <button onclick="completePurchase()" class="w-full px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPT DA APLICAÇÃO -->
    <script>
        // CLASSES DE DADOS
        class Produto {
            constructor(nome, preco, codigo, link, descricao, imageUrl) {
                this.nome = nome;
                this.preco = parseFloat(preco);
                this.codigo = codigo;
                this.link = link;
                this.descricao = descricao;
                this.imageUrl = imageUrl;
                this.quantidade = 0;
            }
        }

        class Cliente {
            constructor(nome, sobrenome, cpf, telefone, endereco, email, senha, formaPagamento) {
                this.nome = nome;
                this.sobrenome = sobrenome;
                this.cpf = cpf;
                this.telefone = telefone;
                this.endereco = endereco;
                this.email = email;
                this.senha = senha;
                this.formaPagamento = formaPagamento;
            }
        }

        // VARIÁVEIS GLOBAIS DE ESTADO
        let produtos = [];
        let clientes = [];
        let usuarioAutenticado = null;
        let adminAutenticado = false;
        
        // FUNÇÕES DE UTILIDADE E ARMAZENAMENTO
        function loadData() {
            produtos = JSON.parse(localStorage.getItem('produtos')) || [];
            clientes = JSON.parse(localStorage.getItem('clientes')) || [];
            usuarioAutenticado = localStorage.getItem('usuarioAutenticado') || null;
            adminAutenticado = localStorage.getItem('adminAutenticado') === 'true' ? true : false;
        }

        function saveData() {
            localStorage.setItem('produtos', JSON.stringify(produtos));
            localStorage.setItem('clientes', JSON.stringify(clientes));
            localStorage.setItem('usuarioAutenticado', usuarioAutenticado);
            localStorage.setItem('adminAutenticado', adminAutenticado);
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(pageId + '-page').classList.remove('hidden');
            if (pageId === 'home') {
                renderProducts();
            }
            if (pageId === 'cart') {
                renderCart();
            }
            if (pageId === 'admin') {
                renderAdminProducts();
            }
            updateAuthButton();
        }

        function showMessageModal(message) {
            document.getElementById('message-modal-text').innerText = message;
            document.getElementById('message-modal-overlay').classList.remove('hidden');
        }

        function showConfirmModal(cartDetails) {
            const container = document.getElementById('confirm-modal-cart-details');
            container.innerHTML = '';
            cartDetails.forEach(item => {
                const p = document.createElement('p');
                p.innerText = `${item.quantidade} x ${item.nome} - R$ ${item.totalItem.toFixed(2).replace('.', ',')}`;
                container.appendChild(p);
            });
            document.getElementById('confirm-modal-overlay').classList.remove('hidden');
        }
        
        function hideModal(modalType) {
            if (modalType === 'message') {
                document.getElementById('message-modal-overlay').classList.add('hidden');
            }
            if (modalType === 'confirm') {
                document.getElementById('confirm-modal-overlay').classList.add('hidden');
            }
        }

        // LÓGICA DE AUTENTICAÇÃO E RENDERIZAÇÃO
        function renderProducts() {
            const container = document.getElementById('products-container');
            container.innerHTML = '';
            if (produtos.length === 0) {
                container.innerHTML = '<p class="text-center col-span-full text-lg text-gray-400">Nenhum produto cadastrado.</p>';
            }
            produtos.forEach((produto, index) => {
                const card = document.createElement('div');
                card.className = 'bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 overflow-hidden';
                card.innerHTML = `
                    <div class="product-image cursor-pointer" style="background-image: url(${produto.imageUrl})" onclick="showProductDetails(${index})"></div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold text-gray-50 mb-2">${produto.nome}</h3>
                        <p class="text-gray-400 text-sm mb-4">${produto.descricao.substring(0, 50)}...</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xl font-bold text-gray-50">R$ ${produto.preco.toFixed(2).replace('.', ',')}</span>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition" onclick="addToCart(${index})">
                                Comprar
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderCart() {
            const container = document.getElementById('cart-items-container');
            const summary = document.getElementById('cart-summary');
            const emptyMessage = document.getElementById('cart-empty-message');
            container.innerHTML = '';
            
            let totalGeral = 0;
            const itensDoCarrinho = produtos.filter(p => p.quantidade > 0);

            if (itensDoCarrinho.length === 0) {
                emptyMessage.classList.remove('hidden');
                summary.classList.add('hidden');
                return;
            }

            emptyMessage.classList.add('hidden');
            summary.classList.remove('hidden');

            itensDoCarrinho.forEach((produto, index) => {
                const totalItem = produto.quantidade * produto.preco;
                totalGeral += totalItem;

                const item = document.createElement('div');
                item.className = 'bg-gray-800 p-6 rounded-xl shadow-md flex justify-between items-center mb-4';
                item.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <img src="${produto.imageUrl}" alt="${produto.nome}" class="w-16 h-16 object-cover rounded-lg">
                        <div>
                            <h4 class="font-bold">${produto.nome}</h4>
                            <p class="text-gray-400">R$ ${produto.preco.toFixed(2).replace('.', ',')}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <input type="number" value="${produto.quantidade}" min="1" max="10" 
                               onchange="updateCartQuantity(${produtos.indexOf(produto)}, this.value)"
                               class="w-16 px-2 py-1 bg-gray-700 rounded-lg text-center">
                        <span class="font-bold">R$ ${totalItem.toFixed(2).replace('.', ',')}</span>
                        <button onclick="removeFromCart(${produtos.indexOf(produto)})" class="text-red-500 hover:text-red-700">
                            Remover
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });

            document.getElementById('cart-total').innerText = `R$ ${totalGeral.toFixed(2).replace('.', ',')}`;
        }
        
        function renderAdminProducts() {
            const container = document.getElementById('admin-products-list');
            container.innerHTML = '';
            if (produtos.length === 0) {
                container.innerHTML = '<p class="text-center col-span-full text-lg text-gray-400">Nenhum produto cadastrado.</p>';
            }
            produtos.forEach((produto, index) => {
                const card = document.createElement('div');
                card.className = 'bg-gray-900 rounded-xl p-4 shadow-md flex items-center justify-between';
                card.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <img src="${produto.imageUrl}" alt="${produto.nome}" class="w-12 h-12 object-cover rounded-lg">
                        <div>
                            <h4 class="font-bold text-gray-50">${produto.nome}</h4>
                            <p class="text-sm text-gray-400">R$ ${produto.preco.toFixed(2).replace('.', ',')}</p>
                        </div>
                    </div>
                    <button onclick="deleteProduct(${index})" class="text-red-500 hover:text-red-700">
                        Excluir
                    </button>
                `;
                container.appendChild(card);
            });
        }

        // LÓGICA DE AÇÕES
        function updateAuthButton() {
            const authBtn = document.getElementById('auth-btn');
            if (usuarioAutenticado) {
                authBtn.innerText = `Olá, ${usuarioAutenticado}`;
                authBtn.onclick = () => {
                    logout();
                };
            } else {
                authBtn.innerText = 'Login';
                authBtn.onclick = () => {
                    showPage('login');
                };
            }
        }

        function login(email, senha) {
            const cliente = clientes.find(c => c.email === email && c.senha === senha);
            if (cliente) {
                usuarioAutenticado = cliente.nome;
                saveData();
                showMessageModal(`Bem-vindo, ${cliente.nome}!`);
                showPage('home');
            } else {
                showMessageModal('E-mail ou senha inválidos.');
            }
        }
        
        function adminLogin(user, pass) {
            // Login de admin hardcoded para demonstração
            if (user === 'admin' && pass === '12345') {
                adminAutenticado = true;
                saveData();
                showPage('admin');
            } else {
                showMessageModal('Credenciais de administrador inválidas.');
            }
        }

        function logout() {
            usuarioAutenticado = null;
            adminAutenticado = false;
            saveData();
            showPage('home');
            showMessageModal('Você saiu da sua conta.');
        }

        function addToCart(index) {
            if (!usuarioAutenticado) {
                showMessageModal('Você precisa estar logado para adicionar itens ao carrinho.');
                return;
            }
            produtos[index].quantidade++;
            saveData();
            showMessageModal('Produto adicionado ao carrinho!');
        }

        function updateCartQuantity(index, value) {
            const newQuantity = parseInt(value);
            if (!isNaN(newQuantity) && newQuantity >= 1) {
                produtos[index].quantidade = newQuantity;
            }
            saveData();
            renderCart();
        }

        function removeFromCart(index) {
            produtos[index].quantidade = 0;
            saveData();
            renderCart();
        }

        function checkout() {
            const itensDoCarrinho = produtos.filter(p => p.quantidade > 0).map(p => ({
                nome: p.nome,
                quantidade: p.quantidade,
                totalItem: p.quantidade * p.preco
            }));
            if (itensDoCarrinho.length > 0) {
                showConfirmModal(itensDoCarrinho);
            } else {
                showMessageModal('Seu carrinho está vazio!');
            }
        }

        function completePurchase() {
            hideModal('confirm');
            showMessageModal('Compra efetuada com sucesso!');
            // Zera o carrinho após a compra
            produtos.forEach(p => p.quantidade = 0);
            saveData();
            showPage('home');
        }
        
        function deleteProduct(index) {
            if(confirm(`Tem certeza que deseja excluir o produto ${produtos[index].nome}?`)){
                produtos.splice(index, 1);
                saveData();
                renderAdminProducts();
                showMessageModal('Produto excluído com sucesso.');
            }
        }
        
        // EVENT LISTENERS
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            showPage('home');
            updateAuthButton();

            // Adiciona um produto de exemplo se a lista estiver vazia
            if (produtos.length === 0) {
                produtos.push(new Produto('Capitão América - Escudo', 350.00, 'CA101', '#', 'Réplica fiel do escudo icônico do Capitão América, feito de Vibranium.', 'https://placehold.co/400x400/0000FF/FFFFFF?text=Escudo+CA'));
                produtos.push(new Produto('Martelo do Thor - Mjolnir', 450.00, 'TH202', '#', 'Réplica do poderoso martelo Mjolnir, forjado nas estrelas.', 'https://placehold.co/400x400/808080/FFFFFF?text=Martelo+Thor'));
                produtos.push(new Produto('Armadura do Homem de Ferro', 280.00, 'IM303', '#', 'Miniatura detalhada da armadura Mark 50 do Homem de Ferro.', 'https://placehold.co/400x400/FF0000/FFFFFF?text=Armadura+IM'));
                produtos.push(new Produto('Batrang do Batman', 120.00, 'BM404', '#', 'Réplica do batarang, a arma letal do Batman.', 'https://placehold.co/400x400/000000/FFFFFF?text=Batrang'));
                saveData();
            }
        });

        // Formulário de Login
        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = e.target.email.value;
            const senha = e.target.senha.value;
            login(email, senha);
        });

        // Formulário de Cadastro
        document.getElementById('register-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const cliente = new Cliente(
                e.target.nome.value,
                e.target.sobrenome.value,
                e.target.cpf.value,
                e.target.telefone.value,
                e.target.endereco.value,
                e.target.email.value,
                e.target.senha.value,
                e.target.formaPagamento.value
            );
            clientes.push(cliente);
            saveData();
            showMessageModal('Cadastro realizado com sucesso! Faça login para continuar.');
            showPage('login');
        });

        // Formulário de Login Admin
        document.getElementById('admin-login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const user = e.target.user.value;
            const pass = e.target.pass.value;
            adminLogin(user, pass);
        });
        
        // Formulário de Adicionar Produto
        document.getElementById('add-product-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const nome = document.getElementById('prod-nome').value;
            const preco = document.getElementById('prod-preco').value;
            const codigo = document.getElementById('prod-cod').value;
            const link = document.getElementById('prod-link').value;
            const descricao = document.getElementById('prod-desc').value;
            const file = document.getElementById('prod-img').files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onloadend = () => {
                    const imageUrl = reader.result;
                    const newProduct = new Produto(nome, preco, codigo, link, descricao, imageUrl);
                    produtos.push(newProduct);
                    saveData();
                    renderAdminProducts();
                    showMessageModal('Produto adicionado com sucesso!');
                    e.target.reset();
                };
                reader.readAsDataURL(file);
            } else {
                showMessageModal('Por favor, selecione uma imagem para o produto.');
            }
        });
    </script>
</body>
</html>
